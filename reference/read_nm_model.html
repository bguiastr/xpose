<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>NONMEM model file parser — read_nm_model • xpose</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="NONMEM model file parser — read_nm_model"><meta property="og:description" content="Parse NONMEM model files in R format"><meta property="og:image" content="https://uupharmacometrics.github.io/xpose/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xpose</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.18</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Getting started</li>
    <li>
      <a href="../reference/figures/cheatsheet.pdf">Cheat sheet (pdf)</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/import_model_outputs.html">Import model outputs</a>
    </li>
    <li>
      <a href="../articles/access_xpdb_data.html">Access xpdb data</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Going further</li>
    <li>
      <a href="../articles/customize_plots.html">Customize plots</a>
    </li>
    <li>
      <a href="../articles/multiple_pages.html">Multiple pages</a>
    </li>
    <li>
      <a href="../articles/vpc.html">Visual Predictive Checks (VPC)</a>
    </li>
    <li>
      <a href="../articles/interactive_plots.html">Create interactive plots (beta)</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/plot_list.html">Plots</a>
</li>
<li>
  <a href="../articles/faq.html">FAQ</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/about.html">About</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/UUPharmacometrics/xpose" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/UUPharmacometrics/xpose/releases" class="external-link">
    <span class="fa fa-download"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>NONMEM model file parser</h1>
    <small class="dont-index">Source: <a href="https://github.com/UUPharmacometrics/xpose/blob/HEAD/R/read_nm_model.R" class="external-link"><code>R/read_nm_model.R</code></a></small>
    <div class="hidden name"><code>read_nm_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parse NONMEM model files in R format</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_nm_model</span><span class="op">(</span></span>
<span>  runno <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prefix <span class="op">=</span> <span class="st">"run"</span>,</span>
<span>  ext <span class="op">=</span> <span class="st">".lst"</span>,</span>
<span>  file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  check_ext <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>runno</dt>
<dd><p>Run number to be used to generate model file name. Used in
combination with <code>prefix</code> and <code>ext</code>.</p></dd>


<dt>prefix</dt>
<dd><p>Prefix to be used to generate model file name. Used in
combination with <code>runno</code> and <code>ext</code>.</p></dd>


<dt>ext</dt>
<dd><p>Extension to be used to generate model file name. Should be one of
'.lst' (default), '.out', '.res', '.mod' or '.ctl' for NONMEM.</p></dd>


<dt>file</dt>
<dd><p>Model file name (preferably a '.lst' file) containing the file
extension. Alternative to <code>prefix</code>, <code>runno</code> and <code>ext</code>
arguments.</p></dd>


<dt>dir</dt>
<dd><p>Location of the model files.</p></dd>


<dt>check_ext</dt>
<dd><p>Logical, if <code>TRUE</code> will provide an error message if the
extension of the NONMEM input file is not one of '.lst', '.out', '.res',
'.mod' or '.ctl' for NONMEM. If <code>FALSE</code> any file extension can be
used.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></code> of class <code>model</code> containing the following columns:</p><ul><li><p>problem: a numeric identifier for the $PROBLEM associated with the code.</p></li>
<li><p>level: a unique numeric identifier to each subroutine block associated with the code.</p></li>
<li><p>subroutine: a character identifier named after the 3 first letters of the subroutine name e.g. '$THETA' and 
 '$TABLE' will become 'the' and 'tab' respectively. In addition all output from the .lst is labeled 'lst', the general nonmem 
 output e.g. NM-TRAN messages are labelled 'oth'. With priors thp, tpv, omp, opd, sip, spd abbreviations are given to the THETAP, 
 THETAPV, OMEGAP, etc.</p></li>
<li><p>code: the code without comments or subroutine names e.g. '$THETA 0.5 ; TVCL' will return '0.5'.</p></li>
<li><p>comment: the last comment of a record e.g. '0.5 ; Clearance (L/h) ; TVCL' will return 'TVCL'.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>A NONMEM model output file (i.e. .lst, .out or .res) should preferably be provided to <code>read_nm_model</code> to allow for a more extensive xpose 
summary. However in some cases these output files may not contain the model code, thus preventing xpose from identifying the associated output 
tables names. In such cases xpose will attempt to read the associated model file (i.e. .mod or .ctl) instead to find the model code. Note: it 
is important that between the naming convention between the NONMEM output and the model file remains consistent e.g. run001.lst should be 
associated with run001.mod.</p>
    </div>
    <div id="file-path-generation">
    <h2>File path generation</h2>
    <p>The rules for model file names generation are
  as follow:</p><ul><li><p>with <code>runno</code>: the full path is generated as
  <code>&lt;dir&gt;/&lt;prefix&gt;&lt;runno&gt;.&lt;ext&gt;</code> e.g. with <code>dir = 'model/pk'</code>,
  <code>prefix = 'run'</code>, <code>runno = '001'</code>, <code>ext = '.lst'</code> the
  resulting path would be <code>model/pk/run001.lst</code></p></li>
<li><p>with <code>file</code>:
  the full path is generated as <code>&lt;dir&gt;/&lt;file&gt;</code> e.g. with <code>dir =
  'model/pk'</code>, <code>file = 'run001.lst'</code> the resulting path would also be
  <code>model/pk/run001.lst</code>. Note: in this case the file extension should be
  provided as part of the `file` argument.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="xpose_data.html">xpose_data</a></code>, <code><a href="read_nm_tables.html">read_nm_tables</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Using the `file` argument to import a model file:</span></span></span>
<span class="r-in"><span><span class="va">nm_model</span> <span class="op">&lt;-</span> <span class="fu">read_nm_model</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'run001.lst'</span>, dir <span class="op">=</span> <span class="st">'models'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using the `runno` argument to import a model file:</span></span></span>
<span class="r-in"><span><span class="va">nm_model</span> <span class="op">&lt;-</span> <span class="fu">read_nm_model</span><span class="op">(</span>runno <span class="op">=</span> <span class="st">'001'</span>, ext <span class="op">=</span> <span class="st">'.lst'</span>, dir <span class="op">=</span> <span class="st">'models'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/guiastrennec" class="external-link">Benjamin Guiastrennec</a>, <a href="https://github.com/andrewhooker" class="external-link">Andrew C. Hooker</a>, <a href="https://github.com/sebastianueckert" class="external-link">Sebastian Ueckert</a>, <a href="https://katalog.uu.se/profile/?id=XX3384" class="external-link">Mats O. Karlsson</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

