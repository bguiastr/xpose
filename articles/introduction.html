<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • xpose</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction">
<meta property="og:description" content="xpose">
<meta property="og:image" content="https://uupharmacometrics.github.io/xpose/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xpose</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.18</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="../reference/figures/cheatsheet.pdf">Cheat sheet (pdf)</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/import_model_outputs.html">Import model outputs</a>
    </li>
    <li>
      <a href="../articles/access_xpdb_data.html">Access xpdb data</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Going further</li>
    <li>
      <a href="../articles/customize_plots.html">Customize plots</a>
    </li>
    <li>
      <a href="../articles/multiple_pages.html">Multiple pages</a>
    </li>
    <li>
      <a href="../articles/vpc.html">Visual Predictive Checks (VPC)</a>
    </li>
    <li>
      <a href="../articles/interactive_plots.html">Create interactive plots (beta)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/plot_list.html">Plots</a>
</li>
<li>
  <a href="../articles/faq.html">FAQ</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/about.html">About</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/UUPharmacometrics/xpose" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/UUPharmacometrics/xpose/releases" class="external-link">
    <span class="fa fa-download"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction</h1>
                        <h4 data-toc-skip class="author">Benjamin
Guiastrennec</h4>
            
            <h4 data-toc-skip class="date">12 February, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/UUPharmacometrics/xpose/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="load-xpose">Load xpose<a class="anchor" aria-label="anchor" href="#load-xpose"></a>
</h3>
<p>The first step is to load xpose in R with the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://uupharmacometrics.github.io/xpose/">xpose</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="import-model-output">Import model output<a class="anchor" aria-label="anchor" href="#import-model-output"></a>
</h3>
<p>The function <code><a href="../reference/xpose_data.html">xpose_data()</a></code> collects all model output
files and table and organizes them into an R object commonly called
<code>xpdb</code> which stands for “xpose database”.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xpdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xpose_data.html">xpose_data</a></span><span class="op">(</span>runno <span class="op">=</span> <span class="st">'001'</span>, dir <span class="op">=</span> <span class="st">'analysis/model/pk/'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="glimpse-at-the-xpdb">Glimpse at the xpdb<a class="anchor" aria-label="anchor" href="#glimpse-at-the-xpdb"></a>
</h3>
<p>The files attached to an xpdb object can be displayed to the console
simply by writing its name to the console or by using the
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xpdb</span> <span class="co"># or print(xpdb)</span></span></code></pre></div>
<pre><code>run001.lst overview: 
 - Software: nonmem 7.3.0 
 - Attached files (memory usage 1.4 Mb): 
   + obs tabs: $prob no.1: catab001.csv, cotab001, patab001, sdtab001 
   + sim tabs: $prob no.2: simtab001.zip 
   + output files: run001.cor, run001.cov, run001.ext, run001.grd, run001.phi, run001.shk 
   + special: &lt;none&gt; 
 - gg_theme: theme_readable 
 - xp_theme: theme_xp_default 
 - Options: dir = data, quiet = FALSE, manual_import = NULL</code></pre>
</div>
<div class="section level3">
<h3 id="model-summary">Model summary<a class="anchor" aria-label="anchor" href="#model-summary"></a>
</h3>
<p>A summary of a model run can be displayed to the console by using the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function on an xpdb object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">xpdb</span><span class="op">)</span></span></code></pre></div>
<pre><code>
Summary for problem no. 0 [Global information] 
 - Software                      @software   : nonmem
 - Software version              @version    : 7.3.0
 - Run directory                 @dir        : data
 - Run file                      @file       : run001.lst
 - Run number                    @run        : run001
 - Reference model               @ref        : 000
 - Run description               @descr      : NONMEM PK example for xpose
 - Run start time                @timestart  : Mon Oct 16 13:34:28 CEST 2017
 - Run stop time                 @timestop   : Mon Oct 16 13:34:35 CEST 2017

Summary for problem no. 1 [Parameter estimation] 
 - Input data                    @data       : ../../mx19_2.csv
 - Number of individuals         @nind       : 74
 - Number of observations        @nobs       : 476
 - ADVAN                         @subroutine : 2
 - Estimation method             @method     : foce-i
 - Termination message           @term       : MINIMIZATION SUCCESSFUL
 - Estimation runtime            @runtime    : 00:00:02
 - Objective function value      @ofv        : -1403.905
 - Number of significant digits  @nsig       : 3.3
 - Covariance step runtime       @covtime    : 00:00:03
 - Condition number              @condn      : 21.5
 - Eta shrinkage                 @etashk     : 9.3 [1], 28.7 [2], 23.7 [3]
 - Epsilon shrinkage             @epsshk     : 14.9 [1]
 - Run warnings                  @warnings   : (WARNING 2) NM-TRAN INFERS THAT THE DATA ARE POPULATION.

Summary for problem no. 2 [Model simulations] 
 - Input data                    @data       : ../../mx19_2.csv
 - Number of individuals         @nind       : 74
 - Number of observations        @nobs       : 476
 - Estimation method             @method     : sim
 - Number of simulations         @nsim       : 20
 - Simulation seed               @simseed    : 221287
 - Run warnings                  @warnings   : (WARNING 2) NM-TRAN INFERS THAT THE DATA ARE POPULATION.
                                               (WARNING 22) WITH $MSFI AND "SUBPROBS", "TRUE=FINAL" ...</code></pre>
</div>
<div class="section level3">
<h3 id="parameter-estimates">Parameter estimates<a class="anchor" aria-label="anchor" href="#parameter-estimates"></a>
</h3>
<p>A table of parameter estimates can be displayed to the console by
using the <code><a href="../reference/prm_table.html">prm_table()</a></code> function on an xpdb object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prm_table.html">prm_table</a></span><span class="op">(</span><span class="va">xpdb</span><span class="op">)</span></span></code></pre></div>
<pre><code>
Reporting transformed parameters:
For the OMEGA and SIGMA matrices, values are reported as standard deviations for the diagonal elements and as correlations for the off-diagonal elements. The relative standard errors (RSE) for OMEGA and SIGMA are reported on the approximate standard deviation scale (SE/variance estimate)/2. Use `transform = FALSE` to report untransformed parameters.

Estimates for $prob no.1, subprob no.1, method foce
 Parameter  Label      Value        RSE
 THETA1     TVCL       26.29        0.03391
 THETA2     TVV        1.348        0.0325
 THETA3     TVKA       4.204        0.1925
 THETA4     LAG        0.208        0.07554
 THETA5     Prop. Err  0.2046       0.1097
 THETA6     Add. Err   0.01055      0.3466
 THETA7     CRCL on CL 0.007172     0.2366
 OMEGA(1,1) IIV CL     0.2701       0.08616
 OMEGA(2,2) IIV V      0.195        0.1643
 OMEGA(3,3) IIV KA     1.381        0.1463
 SIGMA(1,1)            1        fix  - </code></pre>
</div>
<div class="section level3">
<h3 id="listing-variables">Listing variables<a class="anchor" aria-label="anchor" href="#listing-variables"></a>
</h3>
<p>A list of available variables for plotting can be displayed to the
console by using the <code><a href="../reference/list_vars.html">list_vars()</a></code> function on an xpdb
object.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_vars.html">list_vars</a></span><span class="op">(</span><span class="va">xpdb</span><span class="op">)</span></span></code></pre></div>
<pre><code>
List of available variables for problem no. 1 
 - Subject identifier (id)               : ID
 - Dependent variable (dv)               : DV
 - Independent variable (idv)            : TIME
 - Dose amount (amt)                     : AMT
 - Event identifier (evid)               : EVID
 - Model typical predictions (pred)      : PRED
 - Model individual predictions (ipred)  : IPRED
 - Model parameter (param)               : KA, CL, V, ALAG1
 - Eta (eta)                             : ETA1, ETA2, ETA3
 - Residuals (res)                       : CWRES, IWRES, RES, WRES
 - Categorical covariates (catcov)       : SEX, MED1, MED2
 - Continuous covariates (contcov)       : CLCR, AGE, WT
 - Compartment amounts (a)               : A1, A2
 - Not attributed (na)                   : DOSE, SS, II, TAD, CPRED

List of available variables for problem no. 2 
 - Subject identifier (id)               : ID
 - Dependent variable (dv)               : DV
 - Independent variable (idv)            : TIME
 - Dose amount (amt)                     : AMT
 - Event identifier (evid)               : EVID
 - Model individual predictions (ipred)  : IPRED
 - Not attributed (na)                   : DOSE, TAD, SEX, CLCR, AGE, WT</code></pre>
</div>
<div class="section level3">
<h3 id="pipes">Pipes<a class="anchor" aria-label="anchor" href="#pipes"></a>
</h3>
<p><code>xpose</code> makes use of the pipe operator <code>%&gt;%</code>
from the package <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>. Pipes
can be used to generate clear workflow.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/xpose_data.html">xpose_data</a></span><span class="op">(</span>runno <span class="op">=</span> <span class="st">'001'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/dv_vs_pred.html">dv_vs_ipred</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/xpose_save.html">xpose_save</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'run001_dv_vs_ipred.pdf'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="editing-the-xpdb">Editing the xpdb<a class="anchor" aria-label="anchor" href="#editing-the-xpdb"></a>
</h3>
<p>Multiples edits can be made to the xpdb object. For instance the type
(visible using the <code><a href="../reference/list_vars.html">list_vars()</a></code> function described above) of
a variable can be changed. Hence the independent variable (idv) could be
changed from <code>TIME</code> (default in NONMEM) to <code>TAD</code>.
All plots using <code>idv</code> will then automatically use
<code>TAD</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With the TIME default</span></span>
<span><span class="va">xpdb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/pred_vs_idv.html">dv_vs_idv</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/change%20idv-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># After IDV reassignment</span></span>
<span><span class="va">xpdb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/set_vars.html">set_var_types</a></span><span class="op">(</span>idv <span class="op">=</span> <span class="st">'TAD'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/pred_vs_idv.html">dv_vs_idv</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/change%20idv-2.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="generating-plots">Generating plots<a class="anchor" aria-label="anchor" href="#generating-plots"></a>
</h3>
<p>Plotting functions are used as follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DV vs. IPRED plot</span></span>
<span><span class="fu"><a href="../reference/dv_vs_pred.html">dv_vs_ipred</a></span><span class="op">(</span><span class="va">xpdb</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/demo%20basic%20gof-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CWRES vs. PRED plot</span></span>
<span><span class="fu"><a href="../reference/res_vs_pred.html">res_vs_pred</a></span><span class="op">(</span><span class="va">xpdb</span>, res <span class="op">=</span> <span class="st">'CWRES'</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/demo%20basic%20gof-2.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="saving-plots">Saving plots<a class="anchor" aria-label="anchor" href="#saving-plots"></a>
</h3>
<p>The <code>xpose_save</code> function was designed to facilitate the
export of xpose plots. The file extension is guessed from the file name
and must match one of .pdf (default), .jpeg, .png, .bmp or .tiff. If no
extension is provided as part of the file name a .pdf will be generated.
Finally, if the <code>plot</code> argument is left empty
<code>xpose_save</code> will automatically save the last plot that was
created or modified.</p>
<p>The <code><a href="../reference/xpose_save.html">xpose_save()</a></code> function is compatible with templates
titles and keywords such as <code>@run</code> for the run number and
<code>@plotfun</code> for the name of the plotting function can be used
to automatically name files. Learn more about the template titles
keywords using <code><a href="../reference/template_titles.html">help('template_titles')</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save the last generated plot</span></span>
<span><span class="fu"><a href="../reference/dv_vs_pred.html">dv_vs_ipred</a></span><span class="op">(</span><span class="va">xpdb</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xpose_save.html">xpose_save</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'run001_dv_vs_ipred.pdf'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Template titles can also be used in filename and the directory</span></span>
<span><span class="va">xpdb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span> <span class="fu"><a href="../reference/dv_vs_pred.html">dv_vs_ipred</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span> <span class="fu"><a href="../reference/xpose_save.html">xpose_save</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'@run_@plotfun_[@ofv].jpeg'</span>, dir <span class="op">=</span> <span class="st">'@dir'</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/guiastrennec" class="external-link">Benjamin Guiastrennec</a>, <a href="https://github.com/andrewhooker" class="external-link">Andrew C. Hooker</a>, <a href="https://github.com/sebastianueckert" class="external-link">Sebastian Ueckert</a>, <a href="https://katalog.uu.se/profile/?id=XX3384" class="external-link">Mats O. Karlsson</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
